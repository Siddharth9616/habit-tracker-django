<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Habit Tracker</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand fw-bold" href="/">HabitTracker</a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
      <span class="navbar-toggler-icon"></span>
    </button>
    

    <div class="collapse navbar-collapse" id="nav">
      <ul class="navbar-nav ms-auto">

  {% if user.is_authenticated %}
    <li class="nav-item">
      <a class="nav-link" href="{% url 'add_habit' %}">Add Habit</a>
    </li>

    <li class="nav-item">
      <a class="nav-link" href="{% url 'profile' %}">Profile</a>
    </li>

    <li class="nav-item">
      <a class="nav-link" href="{% url 'weekly_analytics' %}">
        Weekly Analytics
      </a>
    </li>

    <li class="nav-item">
      <a class="nav-link" href="{% url 'heatmap' %}">
        Heatmap
      </a>
    </li>

    <li class="nav-item">
      <a class="nav-link" href="{% url 'logout' %}">
        Logout
      </a>
    </li>

  {% else %}
    <li class="nav-item">
      <a class="nav-link" href="{% url 'login' %}">
        Login
      </a>
    </li>

    <li class="nav-item">
      <a class="nav-link" href="{% url 'signup' %}">
        Sign Up
      </a>
    </li>
  {% endif %}

</ul>

      <button id="themeToggle" class="btn btn-outline-light btn-sm" onclick="toggleTheme()">ðŸŒ™</button>


    </div>
  </div>
</nav>

<div class="container py-4">
    {% block content %}{% endblock %}
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
function setIcon(isDark) {
  const btn = document.getElementById("themeToggle");
  btn.innerText = isDark ? "â˜€ï¸" : "ðŸŒ™";
}

function toggleTheme() {
  document.body.classList.toggle("dark");
  const isDark = document.body.classList.contains("dark");
  localStorage.setItem("darkMode", isDark);
  setIcon(isDark);
}

/* Apply theme + icon on page load */
document.addEventListener("DOMContentLoaded", () => {
  const isDark = localStorage.getItem("darkMode") === "true";
  if (isDark) {
    document.body.classList.add("dark");
  }
  setIcon(isDark);
});
</script>





</body>
</html>

<style>
.heatmap-container {
  overflow-x: auto;
}

.heatmap-grid {
  display: grid;
  grid-auto-flow: column;
  grid-template-rows: repeat(7, 14px);
  gap: 4px;
}

.day {
  width: 14px;
  height: 14px;
  border-radius: 3px;
}

.month-row {
  display: grid;
  grid-auto-flow: column;
  grid-template-rows: 14px;
  gap: 4px;
  margin-bottom: 6px;
  font-size: 12px;
  color: #8b949e;
}

.legend {
  margin-top: 10px;
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
}

.legend .box {
  width: 14px;
  height: 14px;
  border-radius: 3px;
}


/* Light (default) */
body {
  background: #f5f6fa;
  color: #111;
}

/* Dark mode */
body.dark {
  background: #0f172a;
  color: #e5e7eb;
}

/* Cards */
body.dark .card {
  background: #1e293b;
  color: #e5e7eb;
}

/* Navbar */
body.dark .navbar {
  background: #020617 !important;
}

/* Buttons */
body.dark .btn-outline-warning {
  color: #facc15;
  border-color: #facc15;
}

body.dark .btn-outline-danger {
  color: #f87171;
  border-color: #f87171;
}

/* Inputs & checkboxes */
body.dark input,
body.dark textarea {
  background: #020617;
  color: #e5e7eb;
  border: 1px solid #334155;
}
body.dark .card h1,
body.dark .card h2,
body.dark .card h3,
body.dark .card h4 {
  color: #f8fafc;
}

body.dark .card p,
body.dark .card span {
  color: #cbd5e1;
}
body.dark .achievements-text {
  color: #e5e7eb;
  opacity: 0.9;
}
.card {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

body.dark .card {
  box-shadow: 0 10px 25px rgba(0,0,0,0.35);
}

.card:hover {
  transform: translateY(-2px);
}

body.dark .habit-completed {
  text-decoration: line-through;
  opacity: 0.6;
}

body.dark .habit-completed::after {
  content: " âœ”";
  color: #22c55e;
}

/* Force full-page dark background */
body.dark,
body.dark .container,
body.dark .container-fluid,
body.dark main {
  background-color: #0f172a !important;
}

#themeToggle {
  transition: transform 0.2s ease;
}

#themeToggle:hover {
  transform: rotate(15deg) scale(1.05);
}




</style>
